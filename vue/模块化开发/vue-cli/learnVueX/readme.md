# VueX

## 了解 VueX

### VueX 是做什么的

* [Vuex 文档](https://vuex.vuejs.org/zh/)

* 官方解释: VueX 是一个专为 Vue.js 应用程序开发的 __状态管理模式__
  * 它采用 <font style="color: red">集中式存储管理</font>, 并以相应的规则保证状态以一种可预测的方式发生变化.
  * VueX 也集成到 Vue 的官方调试工具 *devtools extension*, 提供了诸如零配置的 *time travel* 调试、状态快照导入导出等高级调试功能.

* __状态管理__ 到底是什么
  * __状态管理模式, 集中式存储管理__ 这些名词听起来就非常高大上, 让人捉摸不透
  * 其实, 你可以简单的将其看成把需要多个组件共享的变量去哪里存储在一个对象里面
  * 然后, 将这个对象放在顶层的 Vue 实例中, 让其他组件可以使用
  * 那么, 多个组件是不是就可以共享这个对象中所有变量属性了呢?

* 等等, 如果是这样的话, 为什么官方还要专门出一个插件 VueX 呢? 难道我们不能自己封装一个对象来管理吗?
  * 当然可以, 只是我们要先想象 VueJs 带給我们最大的便利是什么呢? 没错, 就是响应式
  * 如果你自己封装实现一个能不能保证它里面所有的属性做到响应式呢? 当然也可以, 只是自己封装可能稍微麻烦一些.
  * 不用怀疑, VueX 就是为了提供这样一个在多个组件间共享状态的插件, 用它就可以了.

### 管理什么状态呢

* 但是, 有什么状态是需要我们在多个组件间共享的呢?
  * 如果你做过大型开发, 你一定遇到过多个状态, 在多个界面间的共享问题.
  * 比如用户的登录状态、用户名称、头像、地理位置信息等等.
  * 比如商品的收藏、购物车中的物品等等.
  * 这些状态信息, 我们都可以放在统一的地方, 对它进行保存和管理, 而且它们还是响应式的.
  * 需要在多个界面共享的数据.

* OK, 从理论上理解了状态管理之后, 让我们从实际的代码再来看看状态管理.
  * __Talk is cheap, show me the code.  ---- Linus__

### 单页面的状态管理

* 我们知道, 要在单个组件中进行状态管理是一件非常简单的事情
  * 来看下面的流程

  ```text
        ______ Actions _____
        ↑                   |
        |                   ↓
        view ←------------ state

  ```

* 上述流程怎么理解
  * State: 不用多说, 就是我们的状态(姑且可以当做就是 data 中的属性)
  * View: 视图层, 可以针对 State 的变化, 显示不同的信息
  * Actions: 这里的 Actions 主要是用户的各种操作: 点击、输入等, 会导致状态的改变

### 多页面状态管理

* Vue 已经帮我们做好了单个界面的状态管理, 但是如果是多个界面呢?
  * 多个视图都依赖同一个状态(一个状态改了, 多个界面需要进行更新)
  * 不同界面的 Actions 都想修改同一个状态( Home.vue 需要修改, Profile.vue 也需要修改这个状态)

* 也就是说对于某些状态(状态1/状态2/状态3)来说只属于我们某一个视图, 但是也有一些状态(状态a/状态b/状态c)属于多个视图共同想要维护的
  * 状态1/状态2/状态3 你放在你自己的房间中, 你自己管理自己用, 没问题
  * 但是 状态a/状态b/状态c 我们虚妄交給一个大管家来统一帮助我们管理
  * 没错, vuex 就是为我们提供这个大管家的工具

* 全局单例模式(大管家)
  * 我们现在要做的就是将共享的状态抽取出来, 交給我们的大管家,统一进项管理
  * 之后, 你们每个视图, 按照我 __规定好的__ 规定, 进行访问和修改等操作
  * 这就是 vuex 背后的基本思想
